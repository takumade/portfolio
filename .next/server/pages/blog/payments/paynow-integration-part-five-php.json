{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var p=e=>l(e,\"__esModule\",{value:!0});var N=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),u=(e,s)=>{p(e);for(var c in s)l(e,c,{get:s[c],enumerable:!0})},k=(e,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let a of h(s))!m.call(e,a)&&a!==\"default\"&&l(e,a,{get:()=>s[a],enumerable:!(c=r(s,a))||c.enumerable});return e},g=e=>k(p(l(e!=null?o(d(e)):{},\"default\",e&&e.__esModule&&\"default\"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var i=N((w,t)=>{t.exports=_jsx_runtime});var v={};u(v,{default:()=>y,frontmatter:()=>f});var n=g(i()),f={title:\"Paynow Integration Part 5a - Checking for payments\",date:\"2022-07-03\",tags:[\"Paynow\",\"Payments\",\"Integration\"],draft:!1,summary:\"If you don't check and verify your payments your customers can buy things for free from you.(PHP)\",images:[\"/static/images/paynow-intro.jpg\"],layout:\"PostLayout\",readTime:\"4 minute read\"};function b(e={}){let{wrapper:s}=e.components||{};return s?(0,n.jsx)(s,Object.assign({},e,{children:(0,n.jsx)(c,{})})):c();function c(){let a=Object.assign({p:\"p\",ul:\"ul\",li:\"li\",h2:\"h2\",a:\"a\",span:\"span\",pre:\"pre\",code:\"code\",strong:\"strong\",img:\"img\"},e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.p,{children:\"Once you have requested for a transaction to take place the next steps includes\"}),(0,n.jsxs)(a.ul,{children:[(0,n.jsx)(a.li,{children:\"Checking transaction status\"}),(0,n.jsx)(a.li,{children:\"Taking the correct action(giving or denying access)\"})]}),(0,n.jsx)(a.p,{children:\"In this tutorial we check if Paynow transaction has succeeded they can the correct action.\"}),(0,n.jsxs)(a.h2,{id:\"checking-if-transaction-is-taking-place\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#checking-if-transaction-is-taking-place\",tabIndex:\"-1\",children:(0,n.jsx)(a.span,{className:\"icon icon-link\"})}),\"Checking if transaction is taking place\"]}),(0,n.jsx)(a.p,{children:\"In the last part we send a transaction to Paynow and Paynow did send a dialog to our customer.\"}),(0,n.jsx)(a.p,{children:\"So to check if that succeeded we use this code:\"}),(0,n.jsx)(a.pre,{className:\"language-php\",children:(0,n.jsxs)(a.code,{className:\"language-php code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$response\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"success\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Check if payment is successful\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(a.p,{children:[\"If its \",(0,n.jsx)(a.code,{children:\"true\"}),\" then it mean the transaction is taking place!\"]}),(0,n.jsxs)(a.h2,{id:\"checking-if-transaction-is-successful\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#checking-if-transaction-is-successful\",tabIndex:\"-1\",children:(0,n.jsx)(a.span,{className:\"icon icon-link\"})}),\"Checking if transaction is successful\"]}),(0,n.jsx)(a.p,{children:\"Now lets check if the user paid\"}),(0,n.jsx)(a.pre,{className:\"language-php\",children:(0,n.jsxs)(a.code,{className:\"language-php code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$response\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"success\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$pollUrl\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$response\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"pollUrl\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Check the status of the transaction\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$status\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$paynow\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"pollTransaction\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$pollUrl\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$status\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"paid\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Yay! Transaction was paid for\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// No! It wasn't paid for\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(a.p,{children:\"So the first thing is getting a poll URL\"}),(0,n.jsx)(a.pre,{className:\"language-php\",children:(0,n.jsx)(a.code,{className:\"language-php code-highlight\",children:(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$pollUrl\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$response\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"pollUrl\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(a.p,{children:\"Then use that URL to get the status of the payment\"}),(0,n.jsx)(a.pre,{className:\"language-php\",children:(0,n.jsx)(a.code,{className:\"language-php code-highlight\",children:(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$status\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$paynow\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"pollTransaction\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$pollUrl\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(a.p,{children:\"Then you check the status\"}),(0,n.jsx)(a.pre,{className:\"language-php\",children:(0,n.jsxs)(a.code,{className:\"language-php code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$status\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"paid\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Some success code here\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token keyword\",children:\"else\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Some fail code here\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(a.p,{children:(0,n.jsx)(a.strong,{children:\"This is theoretically correct but practically wrong because a real world mobile transaction can take from 8 seconds to 30 seconds.\"})}),(0,n.jsx)(a.p,{children:\"The user has to put pin, verify if its correct then press accept, by then the code above who have announced it as a failed transaction.\"}),(0,n.jsx)(a.p,{children:\"So we must give some kind of grace period to the transaction checking process. To do that we use a loop plus sleep function.\"}),(0,n.jsx)(a.pre,{className:\"language-php\",children:(0,n.jsxs)(a.code,{className:\"language-php code-highlight\",children:[(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$timeout\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"9\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$count\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"while\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token constant boolean\",children:\"true\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(a.span,{className:\"token function\",children:\"sleep\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"//Check if paid\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$status\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"paid\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"         \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Yay! Transaction was paid for\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`        \n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$count\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"++\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$count\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$timeout\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"       \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Timeout reached\"}),`\n`]}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(a.span,{className:\"code-line\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(a.h2,{id:\"complete-code\",children:[(0,n.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#complete-code\",tabIndex:\"-1\",children:(0,n.jsx)(a.span,{className:\"icon icon-link\"})}),\"Complete Code\"]}),(0,n.jsx)(a.p,{children:\"So the whole code from part 1 to this part will look like this:\"}),(0,n.jsx)(a.pre,{className:\"language-php\",children:(0,n.jsxs)(a.code,{className:\"language-php code-highlight\",children:[(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token delimiter important\",children:\"<?php\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$phone\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token global\",children:\"$_POST\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"phone_number\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Sanitize data\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$platform\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$user_email\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"filter_var\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token global\",children:\"$_POST\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'user_email'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token constant\",children:\"FILTER_SANITIZE_EMAIL\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$invoice_name\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"Invoice \"'}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\".\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"time\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$cart_id\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token global\",children:\"$_POST\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'cart_id'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),\"   \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Sanitize id\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$products\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword this\",children:\"$this\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"get_cart_products\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$cart_id\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Initialize Paynow\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$paynow\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsxs)(a.span,{className:\"token class-name class-name-fully-qualified\",children:[\"Paynow\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"\\\\\"}),\"Payments\",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"\\\\\"}),\"Paynow\"]}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'INTEGRATION_ID'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'INTEGRATION_KEY'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'http://example.com/gateways/paynow/update'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'http://example.com/return?gateway=paynow'\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Create Payments\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$invoice_name\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"Invoice \"'}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\".\"}),\" \",(0,n.jsx)(a.span,{className:\"token function\",children:\"time\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$payment\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$paynow\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"createPayment\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$invoice_name\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$user_email\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Add some products\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"foreach\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$products\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$product\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"     \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$payment\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"add\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$product\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token property\",children:\"name\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$product\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token property\",children:\"price\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Detect platform and send payment\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"str_starts_with\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$phone\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'071'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"     \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$platform\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"onemoney\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"str_starts_with\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$phone\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'073'\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$platform\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"telecash\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(a.span,{className:\"token keyword\",children:\"else\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$platform\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"ecocash\"'}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token variable\",children:\"$response\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$paynow\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"sendMobile\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$payment\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$phone\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$platform\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Check transaction success\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$response\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"success\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Get transaction poll URL\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"    \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$pollUrl\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$response\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"pollUrl\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`    \n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"     \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$timeout\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"9\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"     \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$count\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"     \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"while\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token constant boolean\",children:\"true\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"         \",(0,n.jsx)(a.span,{className:\"token function\",children:\"sleep\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"         \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Get the status of the transaction\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"         \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$status\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$paynow\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"pollTransaction\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$pollUrl\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"         \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"//Check if paid\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"         \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$status\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,n.jsx)(a.span,{className:\"token function\",children:\"paid\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"           \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Yay! Transaction was paid for\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"           \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Save transactions to database and grant access\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"          \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`        \n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"          \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$count\"}),(0,n.jsx)(a.span,{className:\"token operator\",children:\"++\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"          \",(0,n.jsx)(a.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(a.span,{className:\"token variable\",children:\"$count\"}),\" \",(0,n.jsx)(a.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(a.span,{className:\"token variable\",children:\"$timeout\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"             \",(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Timeout reached\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"           \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[\"      \",(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsx)(a.span,{className:\"token language-php php\",children:`\n`})}),(0,n.jsx)(a.span,{className:\"code-line\",children:(0,n.jsxs)(a.span,{className:\"token language-php php\",children:[(0,n.jsx)(a.span,{className:\"token comment\",children:\"// Transaction failed\"}),`\n`]})})]})}),(0,n.jsx)(a.p,{children:\"So that's it guys, go ahead and get paid, enjoy the rest of the week.\"}),(0,n.jsx)(a.p,{children:(0,n.jsx)(a.img,{alt:\"image\",src:\"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/oe6jv0oiagy35e3vqti9.png\"})})]})}}var y=b;return v;})();\n;return Component;","toc":[{"value":"Checking if transaction is taking place","url":"#checking-if-transaction-is-taking-place","depth":2},{"value":"Checking if transaction is successful","url":"#checking-if-transaction-is-successful","depth":2},{"value":"Complete Code","url":"#complete-code","depth":2}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.61,"time":336600,"words":1122},"slug":"payments/paynow-integration-part-five-php","fileName":"payments/paynow-integration-part-five-php.md","title":"Paynow Integration Part 5a - Checking for payments","date":"2022-07-03T00:00:00.000Z","tags":["Paynow","Payments","Integration"],"draft":false,"summary":"If you don't check and verify your payments your customers can buy things for free from you.(PHP)","images":["/static/images/paynow-intro.jpg"],"layout":"PostLayout","readTime":"4 minute read"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.395,"time":23700,"words":79},"slug":["default"],"fileName":"default.mdx","name":"Takunda Madechangu","avatar":"https://media-exp1.licdn.com/dms/image/C5603AQE02WVVvLkz2w/profile-displayphoto-shrink_800_800/0/1648488522359?e=1661385600&v=beta&t=q_p8xi2vVgLT-ktZM6jNOH0LMqUZkpbo-qe9Db7nuxY","occupation":"Developer","company":"Corporate Advisors Canada —","email":"madechangu.takunda@gmail.com","twitter":"https://twitter.com/takucoder","linkedin":"https://www.linkedin.com/in/tmadechangu","github":"https://github.com/takumade","whatsapp":"https://wa.me/263778548832?text=Hello+Taku+","date":null}],"prev":{"title":"Paynow Integration Part 4a - PHP Integration","date":"2022-07-03T00:00:00.000Z","tags":["Paynow","Payments","Integration"],"draft":false,"summary":"So we have finished the boring part now lets integrate Paynow into our project(PHP).","images":["/static/images/paynow-intro.jpg"],"layout":"PostLayout","readTime":"4 minute read","slug":"payments/paynow-integration-part-four-php"},"next":{"title":"Is your Paynow integration failing? Here is how to fix it","date":"2022-07-03T00:00:00.000Z","tags":["Paynow","Payments","Integration"],"draft":false,"summary":"Sometimes your integration may not always work out of the box. Here are some tips to help you fix it.","images":["/static/images/paynow-failing.jpg"],"layout":"PostLayout","readTime":"4 minute read","slug":"payments/failing-paynow-integration"}},"__N_SSG":true}